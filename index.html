<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Draxon – Predecessor Dashboard</title>
  <style>
    body {
      background: #121212;
      color: #eee;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      text-align: center;
    }
    h1 {
      color: #00bcd4;
      margin-bottom: 1rem;
    }
    .card {
      background: #1e1e1e;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 1.5rem;
      margin: 1rem auto;
      width: 400px;
      box-shadow: 0 0 10px rgba(0,0,0,0.6);
      text-align: left;
    }
    .card h2 {
      margin-top: 0;
      color: #00bcd4;
    }
    .stat { margin: 0.4rem 0; }
  </style>
</head>
<body>
  <h1>Draxon – Predecessor Dashboard</h1>

  <!-- Algemene stats -->
  <div class="card" id="general">
    <h2>General Stats</h2>
    <p class="stat matches">Matches: loading…</p>
    <p class="stat winrate">Winrate: loading…</p>
    <p class="stat kda">Average KDA: loading…</p>
    <p class="stat hours">Hours Played: loading…</p>
  </div>

  <!-- Hero stats -->
  <div class="card" id="heroes">
    <h2>Top Hero</h2>
    <p class="stat hero">Fav. Hero: loading…</p>
    <p class="stat hero-matches">Matches with Hero: loading…</p>
    <p class="stat hero-winrate">Winrate with Hero: loading…</p>
  </div>

  <!-- Laatste match -->
  <div class="card" id="lastmatch">
    <h2>Last Match</h2>
    <p class="stat match-id">Match ID: loading…</p>
    <p class="stat mode">Mode: loading…</p>
    <p class="stat hero-played">Hero Played: loading…</p>
    <p class="stat result">Result: loading…</p>
  </div>

  <script>
    const playerId = "08aca0ad-a6ef-46c5-a765-e1b3abf659fb";

    // ===== Algemene stats =====
    fetch(`https://omeda.city/players/${playerId}/statistics.json?time_frame=ALL`)
      .then(res => res.json())
      .then(data => {
        document.querySelector("#general .matches").textContent = `Matches: ${data.matches_played}`;
        document.querySelector("#general .winrate").textContent = `Winrate: ${data.win_rate}%`;
        document.querySelector("#general .kda").textContent = `Average KDA: ${data.average_kda}`;
        document.querySelector("#general .hours").textContent = `Hours Played: ${data.total_playtime_hours}`;
      })
      .catch(err => console.error("General stats error:", err));

    // ===== Hero stats =====
    fetch(`https://omeda.city/players/${playerId}/hero_statistics.json?time_frame=ALL`)
      .then(res => res.json())
      .then(heroes => {
        if (heroes.length > 0) {
          const top = heroes[0];
          document.querySelector("#heroes .hero").textContent = `Fav. Hero: ${top.hero_name}`;
          document.querySelector("#heroes .hero-matches").textContent = `Matches with Hero: ${top.matches_played}`;
          document.querySelector("#heroes .hero-winrate").textContent = `Winrate with Hero: ${top.win_rate}%`;
        }
      })
      .catch(err => console.error("Hero stats error:", err));

    // ===== Laatste match =====
    fetch(`https://omeda.city/players/${playerId}/matches.json?per_page=1`)
      .then(res => res.json())
      .then(matches => {
        if (matches.length > 0) {
          const last = matches[0];
          document.querySelector("#lastmatch .match-id").textContent = `Match ID: ${last.match_id}`;
          document.querySelector("#lastmatch .mode").textContent = `Mode: ${last.game_mode}`;
          document.querySelector("#lastmatch .hero-played").textContent = `Hero Played: ${last.hero_name}`;
          document.querySelector("#lastmatch .result").textContent = `Result: ${last.result}`;
        }
      })
      .catch(err => console.error("Last match error:", err));
  </script>
</body>
</html>
